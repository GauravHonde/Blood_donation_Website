<%- include('navbar.ejs') %>

    <!-- Blood Request Section -->
    <section class="py-5 bg-light">
        <div class="container">
            <!-- Header -->
            <div class="text-center mb-5">
                <h1 class="fw-bold mb-3 my-3" style="color: #8a0303;">Emergency Blood Request</h1>
                <p class="lead text-muted">Need blood urgently? Fill out the form below and we'll help you immediately
                </p>
            </div>

            <!-- Emergency Contacts -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="alert alert-danger border-start-0 border-end-0 border-danger border-5 rounded-0">
                        <div class="row align-items-center">
                            <div class="col-md-8">
                                <h5 class="alert-heading mb-1">
                                    <i class="bi bi-telephone-fill me-2"></i>
                                    Emergency Helpline
                                </h5>
                                <p class="mb-0">Call our 24/7 emergency helpline for immediate assistance</p>
                            </div>
                            <div class="col-md-4 text-md-end">
                                <h3 class="fw-bold mb-0">1-800-20012-333</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Form Card -->
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="card border-0 shadow-lg">
                        <!-- Card Header -->
                        <div class="card-header text-white text-center py-4"
                            style="background: linear-gradient(135deg, #8a0303 0%, #c82333 100%);">
                            <i class="bi bi-bell-fill display-4 mb-3"></i>
                            <h2 class="mb-2">Request Blood Now</h2>
                            <p class="mb-0 opacity-75">Complete the form below and we'll connect you with donors
                                immediately</p>
                        </div>

                        <!-- Card Body -->
                        <div class="card-body p-4 p-md-5">
                            <!-- Form -->
                            <form action="/request_donar" method="post">
                                <!-- Patient Information -->
                                <h5 class="fw-bold mb-4" style="color: #8a0303;">
                                    <i class="bi bi-person-heart me-2"></i>
                                    Patient Information
                                </h5>

                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label fw-bold">
                                            <i class="bi bi-person-circle text-danger me-1"></i>
                                            Patient Name *
                                        </label>
                                        <input type="text" name="patient_name" class="form-control form-control-lg"
                                            placeholder="Enter patient's full name" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label fw-bold">
                                            <i class="bi bi-droplet text-danger me-1"></i>
                                            Required Blood Group *
                                        </label>
                                        <select class="form-select form-select-lg" name="required_blood" required>
                                            <option value="">Select Blood Group</option>
                                            <option value="A+">A+</option>
                                            <option value="A-">A-</option>
                                            <option value="B+">B+</option>
                                            <option value="B-">B-</option>
                                            <option value="AB+">AB+</option>
                                            <option value="AB-">AB-</option>
                                            <option value="O+">O+</option>
                                            <option value="O-">O-</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Blood Quantity -->
                                <div class="mb-4">
                                    <label class="form-label fw-bold">
                                        <i class="bi bi-calculator text-danger me-1"></i>
                                        Quantity Required *
                                    </label>
                                    <div class="input-group input-group-lg">
                                        <input type="number" name="quantity_required" class="form-control" min="1"
                                            placeholder="Required units" required>
                                        <span class="input-group-text bg-light">Units</span>
                                    </div>
                                    <div class="form-text">1 unit = 450ml of blood</div>
                                </div>

                                <!-- Hospital Information -->
                                <h5 class="fw-bold mb-4 mt-5" style="color: #8a0303;">
                                    <i class="bi bi-hospital me-2"></i>
                                    Hospital Information
                                </h5>

                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label fw-bold">
                                            <i class="bi bi-building text-danger me-1"></i>
                                            Hospital Name *
                                        </label>
                                        <input type="text" class="form-control form-control-lg"
                                            placeholder="Enter hospital name" name="hospital_name" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label fw-bold">
                                            <i class="bi bi-geo-alt text-danger me-1"></i>
                                            City / Location *
                                        </label>
                                        <input type="text" class="form-control form-control-lg"
                                            placeholder="Enter city or area" name="city_location" required>
                                    </div>
                                </div>

                                <!-- Contact Information -->
                                <h5 class="fw-bold mb-4 mt-5" style="color: #8a0303;">
                                    <i class="bi bi-telephone me-2"></i>
                                    Contact Information
                                </h5>

                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3">
                                        <!-- <label class="form-label fw-bold">
                                            <i class="bi bi-person-badge text-danger me-1"></i>
                                            Contact Person *
                                        </label>
                                        <input type="text" class="form-control form-control-lg"
                                            placeholder="Contact person name" name="contact_number" required> -->
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label fw-bold">
                                            <i class="bi bi-phone text-danger me-1"></i>
                                            Phone Number *
                                        </label>
                                        <input type="tel" name="phone_number" class="form-control form-control-lg"
                                            placeholder="+1 (555) 123-4567" required>
                                    </div>
                                </div>

                                <!-- Urgency Level -->
                                <div class="mb-4">
                                    <label class="form-label fw-bold">
                                        <i class="bi bi-clock-history text-danger me-1"></i>
                                        Urgency Level *
                                    </label>
                                    <select class="form-select form-select-lg" name="urgency_level" required>
                                        <option value="">Select urgency level</option>
                                        <option value="critical" style="color: #dc3545; font-weight: bold;">
                                            üö® Critical (Immediate - Within 1 hour)
                                        </option>
                                        <option value="high" style="color: #fd7e14; font-weight: bold;">
                                            ‚ö†Ô∏è High (Within 24 Hours)
                                        </option>
                                        <option value="normal" style="color: #0d6efd; font-weight: bold;">
                                            üìã Normal (Within 72 Hours)
                                        </option>
                                    </select>
                                </div>

                                <!-- Additional Information -->
                                <div class="mb-4">
                                    <label class="form-label fw-bold">
                                        <i class="bi bi-chat-left-text text-danger me-1"></i>
                                        Additional Information
                                    </label>
                                    <textarea class="form-control" rows="4"
                                        placeholder="Any special requirements or additional details..."
                                        name="additional_information"></textarea>
                                </div>

                                <!-- Declaration -->
                                <div class="mb-4">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="declaration" required>
                                        <label class="form-check-label" for="declaration">
                                            I confirm that this is a genuine blood requirement and all information
                                            provided is accurate
                                        </label>
                                    </div>
                                </div>

                                <!-- Submit Button -->
                                <div class="d-grid">
                                    <button type="submit" class="btn btn-danger btn-lg py-3 fs-5">
                                        <i class="bi bi-send me-2"></i>
                                        Submit Blood Request
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Process Steps -->
                    <div class="row mt-5">
                        <div class="col-12">
                            <h4 class="text-center mb-4" style="color: #8a0303;">How It Works</h4>
                            <div class="row text-center">
                                <div class="col-md-3 mb-4">
                                    <div class="bg-light p-4 rounded-circle d-inline-flex align-items-center justify-content-center mb-3"
                                        style="width: 80px; height: 80px;">
                                        <i class="bi bi-pencil-square fs-2" style="color: #8a0303;"></i>
                                    </div>
                                    <h5>1. Submit Request</h5>
                                    <p class="text-muted small">Fill out the form with all required details</p>
                                </div>
                                <div class="col-md-3 mb-4">
                                    <div class="bg-light p-4 rounded-circle d-inline-flex align-items-center justify-content-center mb-3"
                                        style="width: 80px; height: 80px;">
                                        <i class="bi bi-bell fs-2" style="color: #8a0303;"></i>
                                    </div>
                                    <h5>2. Immediate Alert</h5>
                                    <p class="text-muted small">We notify nearby donors instantly</p>
                                </div>
                                <div class="col-md-3 mb-4">
                                    <div class="bg-light p-4 rounded-circle d-inline-flex align-items-center justify-content-center mb-3"
                                        style="width: 80px; height: 80px;">
                                        <i class="bi bi-telephone-outbound fs-2" style="color: #8a0303;"></i>
                                    </div>
                                    <h5>3. Donor Response</h5>
                                    <p class="text-muted small">Donors confirm availability</p>
                                </div>
                                <div class="col-md-3 mb-4">
                                    <div class="bg-light p-4 rounded-circle d-inline-flex align-items-center justify-content-center mb-3"
                                        style="width: 80px; height: 80px;">
                                        <i class="bi bi-heart-pulse fs-2" style="color: #8a0303;"></i>
                                    </div>
                                    <h5>4. Blood Delivered</h5>
                                    <p class="text-muted small">Blood reaches patient within hours</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Form submission handling
        document.getElementById('bloodRequestForm').addEventListener('submit', function (e) {
            e.preventDefault();

            // Get submit button
            const submitBtn = this.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;

            // Show loading
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="bi bi-hourglass-split me-2"></i>Processing Request...';

            // Simulate API call
            setTimeout(() => {
                // Show success message
                const alertDiv = document.createElement('div');
                alertDiv.className = 'alert alert-success alert-dismissible fade show mt-4';
                alertDiv.innerHTML = `
                <i class="bi bi-check-circle-fill me-2"></i>
                <strong>Request submitted successfully!</strong> We have notified nearby donors. You will receive a call within 15 minutes.
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
                this.parentElement.insertBefore(alertDiv, this);

                // Reset form
                this.reset();

                // Reset button
                submitBtn.disabled = false;
                submitBtn.innerHTML = originalText;

                // Scroll to success message
                alertDiv.scrollIntoView({ behavior: 'smooth' });
            }, 2000);
        });
    </script>

    <%- include('footer.ejs') %>